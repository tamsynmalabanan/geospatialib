/**
 * Minified by jsDelivr using Terser v5.37.0.
 * Original file: /npm/togeojson@0.16.0/togeojson.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var toGeoJSON=function(){"use strict";var e,t=/\s*/g,r=/^\s*|\s*$/g,n=/\s+/;function i(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}function o(e,t){return e.getElementsByTagName(t)}function a(e,t){return e.getAttribute(t)}function s(e,t){return parseFloat(a(e,t))}function l(e,t){var r=o(e,t);return r.length?r[0]:null}function u(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}function f(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function p(e,t){var r,n,i={};for(n=0;n<t.length;n++)(r=l(e,t[n]))&&(i[t[n]]=f(r));return i}function c(e,t){for(var r in t)e[r]=t[r]}function g(e){return u(e.replace(t,"").split(","))}function h(e){for(var t=e.replace(r,"").split(n),i=[],o=0;o<t.length;o++)i.push(g(t[o]));return i}function m(e){var t,r=[s(e,"lon"),s(e,"lat")],n=l(e,"ele"),i=l(e,"gpxtpx:hr")||l(e,"hr"),o=l(e,"time");return n&&(t=parseFloat(f(n)),isNaN(t)||r.push(t)),{coordinates:r,time:o?f(o):null,heartRate:i?parseFloat(f(i)):null}}function y(t){return void 0!==t.xml?t.xml:e.serializeToString(t)}return"undefined"!=typeof XMLSerializer?e=new XMLSerializer:"object"!=typeof exports||"object"!=typeof process||process.browser||(e=new(require("xmldom").XMLSerializer)),{kml:function(e){for(var t={type:"FeatureCollection",features:[]},r={},n={},s={},p=["Polygon","LineString","Point","Track","gx:Track"],c=o(e,"Placemark"),m=o(e,"Style"),d=o(e,"StyleMap"),v=0;v<m.length;v++){var S=i(y(m[v])).toString(16);r["#"+a(m[v],"id")]=S,n[S]=m[v]}for(var k=0;k<d.length;k++){r["#"+a(d[k],"id")]=i(y(d[k])).toString(16);for(var T=o(d[k],"Pair"),b={},x=0;x<T.length;x++)b[f(l(T[x],"key"))]=f(l(T[x],"styleUrl"));s["#"+a(d[k],"id")]=b}for(var L=0;L<c.length;L++)t.features=t.features.concat(P(c[L]));function N(e){var t,r;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(r=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(r)?void 0:r]}function M(e){var t=o(e,"coord"),r=[],n=[];0===t.length&&(t=o(e,"gx:coord"));for(var i=0;i<t.length;i++)r.push(u(f(t[i]).split(" ")));for(var a=o(e,"when"),s=0;s<a.length;s++)n.push(f(a[s]));return{coords:r,times:n}}function F(e){var t,r,n,i,a,s=[],u=[];if(l(e,"MultiGeometry"))return F(l(e,"MultiGeometry"));if(l(e,"MultiTrack"))return F(l(e,"MultiTrack"));if(l(e,"gx:MultiTrack"))return F(l(e,"gx:MultiTrack"));for(n=0;n<p.length;n++)if(r=o(e,p[n]))for(i=0;i<r.length;i++)if(t=r[i],"Point"===p[n])s.push({type:"Point",coordinates:g(f(l(t,"coordinates")))});else if("LineString"===p[n])s.push({type:"LineString",coordinates:h(f(l(t,"coordinates")))});else if("Polygon"===p[n]){var c=o(t,"LinearRing"),m=[];for(a=0;a<c.length;a++)m.push(h(f(l(c[a],"coordinates"))));s.push({type:"Polygon",coordinates:m})}else if("Track"===p[n]||"gx:Track"===p[n]){var y=M(t);s.push({type:"LineString",coordinates:y.coords}),y.times.length&&u.push(y.times)}return{geoms:s,coordTimes:u}}function P(e){var t,i=F(e),u={},p=f(l(e,"name")),c=f(l(e,"styleUrl")),g=f(l(e,"description")),h=l(e,"TimeSpan"),m=l(e,"TimeStamp"),y=l(e,"ExtendedData"),d=l(e,"LineStyle"),v=l(e,"PolyStyle"),S=l(e,"visibility");if(!i.geoms.length)return[];if(p&&(u.name=p),c){"#"!==c[0]&&(c="#"+c),u.styleUrl=c,r[c]&&(u.styleHash=r[c]),s[c]&&(u.styleMapHash=s[c],u.styleHash=r[s[c].normal]);var k=n[u.styleHash];k&&(d||(d=l(k,"LineStyle")),v||(v=l(k,"PolyStyle")))}if(g&&(u.description=g),h){var T=f(l(h,"begin")),b=f(l(h,"end"));u.timespan={begin:T,end:b}}if(m&&(u.timestamp=f(l(m,"when"))),d){var x=N(f(l(d,"color"))),L=x[0],M=x[1],P=parseFloat(f(l(d,"width")));L&&(u.stroke=L),isNaN(M)||(u["stroke-opacity"]=M),isNaN(P)||(u["stroke-width"]=P)}if(v){var w=N(f(l(v,"color"))),R=w[0],z=w[1],C=f(l(v,"fill")),G=f(l(v,"outline"));R&&(u.fill=R),isNaN(z)||(u["fill-opacity"]=z),C&&(u["fill-opacity"]="1"===C?u["fill-opacity"]||1:0),G&&(u["stroke-opacity"]="1"===G?u["stroke-opacity"]||1:0)}if(y){var A=o(y,"Data"),H=o(y,"SimpleData");for(t=0;t<A.length;t++)u[A[t].getAttribute("name")]=f(l(A[t],"value"));for(t=0;t<H.length;t++)u[H[t].getAttribute("name")]=f(H[t])}S&&(u.visibility=f(S)),i.coordTimes.length&&(u.coordTimes=1===i.coordTimes.length?i.coordTimes[0]:i.coordTimes);var D={type:"Feature",geometry:1===i.geoms.length?i.geoms[0]:{type:"GeometryCollection",geometries:i.geoms},properties:u};return a(e,"id")&&(D.id=a(e,"id")),[D]}return t},gpx:function(e){var t,r,n=o(e,"trk"),i=o(e,"rte"),s=o(e,"wpt"),l={type:"FeatureCollection",features:[]};for(t=0;t<n.length;t++)(r=f(n[t]))&&l.features.push(r);for(t=0;t<i.length;t++)(r=g(i[t]))&&l.features.push(r);for(t=0;t<s.length;t++)l.features.push(h(s[t]));function u(e,t){var r=o(e,t),n=[],i=[],a=[],s=r.length;if(s<2)return{};for(var l=0;l<s;l++){var u=m(r[l]);n.push(u.coordinates),u.time&&i.push(u.time),u.heartRate&&a.push(u.heartRate)}return{line:n,times:i,heartRates:a}}function f(e){for(var t,r=o(e,"trkseg"),n=[],i=[],a=[],s=0;s<r.length;s++)(t=u(r[s],"trkpt"))&&(t.line&&n.push(t.line),t.times&&t.times.length&&i.push(t.times),t.heartRates&&t.heartRates.length&&a.push(t.heartRates));if(0!==n.length){var l=y(e);return i.length&&(l.coordTimes=1===n.length?i[0]:i),a.length&&(l.heartRates=1===n.length?a[0]:a),{type:"Feature",properties:l,geometry:{type:1===n.length?"LineString":"MultiLineString",coordinates:1===n.length?n[0]:n}}}}function g(e){var t=u(e,"rtept");if(t.line)return{type:"Feature",properties:y(e),geometry:{type:"LineString",coordinates:t.line}}}function h(e){var t=y(e);return c(t,p(e,["sym","type"])),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:m(e).coordinates}}}function y(e){var t,r;t=p(e,["name","cmt","desc","time","keywords"]),(r=o(e,"link")).length&&(t.links=[]);for(var n,i=0;i<r.length;i++)c(n={href:a(r[i],"href")},p(r[i],["text","type"])),t.links.push(n);return t}return l}}}();"undefined"!=typeof module&&(module.exports=toGeoJSON);
//# sourceMappingURL=/sm/2a5abab6e75ba1e37c3891705cfb0d005b5e25bde1f32c96541df6603ae8e08c.map
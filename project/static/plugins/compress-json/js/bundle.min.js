"use strict";(()=>{function R(e){return Object.prototype.toString.call(e)}function y(e){throw new TypeError("unsupported data type: "+R(e))}function h(e){throw new TypeError("unsupported data type: "+e)}var c="";for(let e=0;e<10;e++){let r=String.fromCharCode(48+e);c+=r}for(let e=0;e<26;e++){let r=String.fromCharCode(65+e);c+=r}for(let e=0;e<26;e++){let r=String.fromCharCode(97+e);c+=r}var d=c.length,V={};for(let e=0;e<d;e++){let r=c[e];V[r]=e}function m(e){let r=0,n=1;for(let t=e.length-1;t>=0;t--){let o=e[t],i=V[o];i*=n,r+=i,n*=d}return r}function D(e){let r=BigInt(0),n=BigInt(1),t=BigInt(d);for(let o=e.length-1;o>=0;o--){let i=e[o],a=BigInt(V[i]);a*=n,r+=a,n*=t}return r}function N(e){if(e===0)return c[0];let r=[];for(;e!==0;){let n=e%d,t=c[n];r.push(t),e-=n,e/=d}return r.reverse().join("")}function F(e){let r=BigInt(0),n=BigInt(d);if(e===r)return c[0];let t=[];for(;e!==r;){let o=e%n,i=c[Number(o)];t.push(i),e/=n}return t.reverse().join("")}function S(e){return e.split("").reverse().join("")}function g(e){if(e<0)return"-"+g(-e);let[r,n]=e.toString().split(".");if(!n)if(r.includes("e")){let[i,a]=r.split("e");r=i,n="0e"+a}else return N(e);let t;n&&([n,t]=n.split("e")),r=x(r),n=S(n),n=x(n);let o=r+"."+n;if(t){switch(o+=".",t[0]){case"+":t=t.slice(1);break;case"-":o+="-",t=t.slice(1);break}t=x(t),o+=t}return o}function x(e){let r=+e;return r.toString()===e&&r+1!==r&&r-1!==r?N(r):":"+F(BigInt(e))}function k(e){return e[0]===":"?D(e.substring(1)).toString():m(e).toString()}function b(e){if(e[0]==="-")return-b(e.substr(1));let[r,n,t]=e.split(".");if(!n)return m(r);r=k(r),n=k(n),n=S(n);let o=r+"."+n;if(t){o+="e";let i=!1;t[0]==="-"&&(i=!0,t=t.slice(1)),t=k(t),o+=i?-t:+t}return+o}function w(e){return e===1/0?"N|+":e===-1/0?"N|-":Number.isNaN(e)?"N|0":"n|"+g(e)}function I(e){return typeof e=="number"?e:m(e)}function T(e){return e?"b|T":"b|F"}function K(e){if(e[1]==="|")switch(e[0]){case"b":case"o":case"n":case"a":case"s":return"s|"+e}return e}function C(e){return e[0]==="s"&&e[1]==="|"?e.substr(2):e}var s={sort_key:!1,preserve_nan:!1,error_on_nan:!1,preserve_infinite:!1,error_on_infinite:!1};function M(e){return e.store.toArray()}function P(){let e=[];return{forEach(r){for(let n=0;n<e.length;n++)if(r(e[n])==="break")return},add(r){e.push(r)},toArray(){return e}}}function Y(){let e=Object.create(null),r=Object.create(null);return{getValue(n){return e[n]},getSchema(n){return r[n]},forEachValue(n){for(let[t,o]of Object.entries(e))if(n(t,o)==="break")return},forEachSchema(n){for(let[t,o]of Object.entries(r))if(n(t,o)==="break")return},setValue(n,t){e[n]=t},setSchema(n,t){r[n]=t},hasValue(n){return n in e},hasSchema(n){return n in r}}}function j(){return{store:P(),cache:Y(),keyCount:0}}function u(e,r){if(e.cache.hasValue(r))return e.cache.getValue(r);let n=e.keyCount++,t=g(n);return e.store.add(r),e.cache.setValue(r,t),t}function z(e,r){s.sort_key&&r.sort();let n=r.join(",");if(e.cache.hasSchema(n))return e.cache.getSchema(n);let t=f(e,r,void 0);return e.cache.setSchema(n,t),t}function f(e,r,n){if(r===null)return"";switch(typeof r){case"undefined":if(Array.isArray(n))return f(e,null,n);break;case"object":if(r===null)return u(e,null);if(Array.isArray(r)){let t="a";for(let o=0;o<r.length;o++){let i=r[o],a=i===null?"_":f(e,i,r);t+="|"+a}return t==="a"&&(t="a|"),u(e,t)}else{let t=Object.keys(r);if(t.length===0)return u(e,"o|");let o="o",i=z(e,t);o+="|"+i;for(let a of t){let l=r[a],_=f(e,l,r);o+="|"+_}return u(e,o)}case"boolean":return u(e,T(r));case"number":return Number.isNaN(r)?s.preserve_nan?u(e,"N|0"):(s.error_on_nan&&h("[number NaN]"),""):Number.POSITIVE_INFINITY===r?s.preserve_infinite?u(e,"N|+"):(s.error_on_infinite&&h("[number Infinity]"),""):Number.NEGATIVE_INFINITY===r?s.preserve_infinite?u(e,"N|-"):(s.error_on_infinite&&h("[number -Infinity]"),""):u(e,w(r));case"string":return u(e,K(r))}return y(r)}function A(e){let r=j(),n=f(r,e,void 0);return[M(r),n]}function G(e,r){if(r==="o|")return{};let n={},t=r.split("|"),o=t[1],i=p(e,o),a=t.length;a-2===1&&!Array.isArray(i)&&(i=[i]);for(let l=2;l<a;l++){let _=i[l-2],v=t[l];v=p(e,v),n[_]=v}return n}function J(e,r){if(r==="a|")return[];let n=r.split("|"),t=n.length-1,o=new Array(t);for(let i=0;i<t;i++){let a=n[i+1];a=p(e,a),o[i]=a}return o}function p(e,r){if(r===""||r==="_")return null;let n=I(r),t=e[n];if(t===null)return t;switch(typeof t){case"undefined":return t;case"number":return t;case"string":if(t[1]==="|")switch(t[0]){case"b":switch(t[2]){case"T":return!0;case"F":return!1;default:return y(t)}case"o":return G(e,t);case"n":return b(t.slice(2));case"N":switch(t[2]){case"+":return 1/0;case"-":return-1/0;case"0":return NaN;default:return y(t)}case"a":return J(e,t)}return C(t)}return y(t)}function E(e){let[r,n]=e;return p(r,n)}function B(e){for(let r in e)e[r]===void 0&&delete e[r]}function O(e){U(e,new Set)}function U(e,r){r.add(e);for(let n in e)if(e[n]===void 0)delete e[n];else{let t=e[n];t&&typeof t=="object"&&!r.has(t)&&U(t,r)}}var L={compress:A,decompress:E,decode:p,addValue:f,trimUndefined:B,trimUndefinedRecursively:O};Object.assign(window,{compressJSON:L});})();
